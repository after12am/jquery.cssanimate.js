/*
 * m.accelerator
 *
 * https://github.com/after12am/m.accelerator
 *
 * Copyright 2012 Satoshi Okami
 * Released under the MIT license
 */
(function(e){e.fn.translateX=function(a,c,b,d,f){this.transit({x:a},c,b,d,f)};e.fn.translateY=function(a,c,b,d,f){this.transit({y:a},c,b,d,f)};e.fn.translateZ=function(a,c,b,d,f,e){this.transit({z:a,perspective:c},b,d,f,e)};e.fn.translate=function(a,c,b,d,f,e){this.transit({x:a,y:c},b,d,f,e)};e.fn.translate3d=function(a,c,b,d,f,e,j,g){this.transit({x:a,y:c,z:b,perspective:d},f,e,j,g)};e.fn.scaleX=function(a,c,b,d,f){this.transit({scalex:a},c,b,d,f)};e.fn.scaleY=function(a,c,b,d,f){this.transit({scaley:a},
c,b,d,f)};e.fn.scaleZ=function(){throw Error("scaleZ is under untested");};e.fn.scale=function(a,c,b,d,f,e){this.transit({scalex:a,scaley:c},b,d,f,e)};e.fn.scale3d=function(){throw Error("scale3d is under untested");};e.fn.rotateX=function(a,c,b,d,f){this.transit({rotatex:a},c,b,d,f)};e.fn.rotateY=function(a,c,b,d,f){this.transit({rotatey:a},c,b,d,f)};e.fn.rotateZ=function(a,c,b,d,f){this.transit({rotatez:a},c,b,d,f)};e.fn.rotate=function(a,c,b,d,f){this.transit({rotate:a},c,b,d,f)};e.fn.rotate3d=
function(a,c,b,d,f,e,g,h){this.transit({rotate:[a,c,b,d]},f,e,g,h)};e.fn.skewX=function(a,c,b,d,f){this.transit({skewx:a},c,b,d,f)};e.fn.skewY=function(a,c,b,d,f){this.transit({skewy:a},c,b,d,f)};e.fn.skew=function(a,c,b,d,f,e){this.transit({skew:[a,c]},b,d,f,e)};e.fn.perspective=function(){throw Error("perspective function is not available");};var g=function(a,c,b,d){a.duration&&(c=a.duration,delete a.duration);a.delay&&(b=a.delay,delete a.delay);a.easing&&(d=a.easing,delete a.easing);this.transition=
{properties:[],duration:c||0,delay:b||0,easing:d||"ease",origin:"50% 50%",style:"flat"};this.transform=[];this.css={};this.parse(a)};g.prototype.build=function(){0==this.transition.properties.length&&(this.transition.properties=["all"]);var a={"-webkit-transition-property":this.transition.properties.join(","),"-webkit-transition-duration":this.transition.duration+"ms","-webkit-transition-timing-function":this.transition.easing,"-webkit-transition-delay":this.transition.delay+"ms","-webkit-transform":this.transform.join(" "),
"-webkit-transform-origin":this.transition.origin,"-webkit-transform-style":this.transition.style};console.log(this.transform);return e.extend(a,this.css)};g.prototype.parse=function(a){"object"==typeof a.position&&(a.position.x&&this.transform.push("translate3d("+a.position.x+"px,"+a.position.y+"px,"+a.position.z+"px)"),a.position[0]&&this.transform.push("translate3d("+a.position[0]+"px,"+a.position[1]+"px,"+a.position[2]+"px)"),delete a.position,delete a.x,delete a.y,delete a.z);a.x&&(a.y&&a.z)&&
(this.transform.push("translate3d("+a.x+"px,"+a.y+"px,"+a.z+"px)"),delete a.x,delete a.y,delete a.z);a.x&&a.y&&(this.transform.push("translate("+a.x+"px,"+a.y+"px)"),delete a.x,delete a.y);a.x&&(this.transform.push("translateX("+a.x+"px)"),delete a.x);a.y&&(this.transform.push("translateY("+a.y+"px)"),delete a.y);a.z&&(this.transform.push("translateZ("+a.z+"px)"),delete a.z);"object"==typeof a.rotate&&(a.rotate.x&&this.transform.push("rotate3d("+a.rotate.x+","+a.rotate.y+","+a.rotate.z+","+a.rotate.rotate+
"deg)"),a.rotate[0]&&this.transform.push("rotate3d("+a.rotate[0]+","+a.rotate[1]+","+a.rotate[2]+","+a.rotate[3]+"deg)"),delete a.rotate,delete a.rotatex,delete a.rotatey,delete a.rotatez);a.rotate&&(this.transform.push("rotate("+a.rotate+"deg)"),delete a.rotate);a.rotatex&&(this.transform.push("rotateX("+a.rotatex+"deg)"),delete a.rotatex);a.rotatey&&(this.transform.push("rotateY("+a.rotatey+"deg)"),delete a.rotatey);a.rotatez&&(this.transform.push("rotateZ("+a.rotatez+"deg)"),delete a.rotatez);
"object"==typeof a.scale&&(a.scale.x&&this.transform.push("scale3d("+a.scale.x+","+a.scale.y+","+a.scale.z+")"),a.scale[0]&&this.transform.push("scale3d("+a.scale[0]+","+a.scale[1]+","+a.scale[2]+")"),delete a.scale,delete a.scalex,delete a.scaley,delete a.scalez);a.scale&&(this.transform.push("scale("+a.scale+","+a.scale+")"),delete a.scale);a.scalex&&(this.transform.push("scaleX("+a.scalex+")"),delete a.scalex);a.scaley&&(this.transform.push("scaleY("+a.scaley+")"),delete a.scaley);a.scalez&&(this.transform.push("scaleZ("+
a.scalez+")"),delete a.scalez);"object"==typeof a.skew&&(a.skew.x&&this.transform.push("skew("+a.skew.x+"deg,"+a.skew.y+"deg)"),a.skew[0]&&this.transform.push("skew("+a.skew[0]+"deg,"+a.skew[1]+"deg)"),delete a.skew,delete a.skewx,delete a.skewy);a.skewx&&(this.transform.push("skewX("+a.skewx+"deg)"),delete a.skewx);a.skewy&&(this.transform.push("skewY("+a.skewy+"deg)"),delete a.skewy);a.property&&("object"==typeof a.property&&(this.transition.properties=a.property),"string"==typeof a.property&&this.transition.properties.push(a.property),
delete a.property);this.css=a;return this};e.prototype.transform={};var h=function(){this.naturalEvent=this.whichTransitionEvent()};h.prototype.whichTransitionEvent=function(){var a,c=document.createElement("fakeelement"),b={transition:"transitionEnd",OTransition:"oTransitionEnd",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in b)if(void 0!==c.style[a])return b[a]};e.fn.transit=function(a,c,b,d,f){"function"===typeof c&&(f=c,c=void 0);"function"===
typeof b&&(f=b,b=void 0);"function"===typeof d&&(f=d,d=void 0);a.perspective?(this.parent().css("-webkit-perspective",a.perspective),delete a.perspective):this.parent().css("-webkit-perspective","none");var i=new h,a=new g(a,c,b,d);this.bind(i.naturalEvent,e.proxy(function(a){this.unbind(i.naturalEvent);this.trigger("onTransitionEnd");e.proxy(f,this)(a)},this)).css(a.build());return this}})(jQuery);
