/*
 * jquery.cssanimate.js
 *
 * A jQuery plugin provides a stylish and cute animation for your smartphone app.
 *
 * https://github.com/after12am/jquery.cssanimate.js
 *
 * Copyright 2012-2013 Satoshi Okami
 * Released under the MIT license
 */
(function(d){function h(a){return{format:function(b){if("object"==typeof b)return a.replace(/\{(\w+)\}/g,function(a,e){return b[e]});b=Array.prototype.slice.apply(arguments);return ss=b.reduce(function(a,e,d){return a.replace("{i}".replace("i",d),b[d])},a.toString())}}}if(!d.cssHooks)throw"jQuery 1.4.3 or above is required for this plugin to work";d.cssHooks.to={get:function(a){return{x:a.cache.position.x,y:a.cache.position.y,z:a.cache.position.z}},set:function(a,b){d(a).cssanimate({to:b},0)}};d.cssHooks.x=
{get:function(a){return a.cache.position.x},set:function(a,b){var c=b.match(/^([-?0-9]+)/);if(!c)return this;d(a).cssanimate({x:c[1]},0)}};d.cssHooks.y={get:function(a){return a.cache.position.y},set:function(a,b){var c=b.match(/^([-?0-9]+)/);if(!c)return this;d(a).cssanimate({y:c[1]},0)}};d.cssHooks.z={get:function(a){return a.cache.position.z},set:function(a,b){var c=b.match(/^([-?0-9]+)/);if(!c)return this;d(a).cssanimate({z:c[1]},0)}};d.cssHooks.rotate={get:function(a){return{x:a.cache.rotation.x,
y:a.cache.rotation.y,z:a.cache.rotation.z}},set:function(a,b){d(a).cssanimate({rotate:b},0)}};d.cssHooks.rotatex={get:function(a){return a.cache.rotation.x},set:function(a,b){var c=b.match(/^([-?0-9]+)/);if(!c)return this;d(a).cssanimate({rotatex:c[1]},0)}};d.cssHooks.rotatey={get:function(a){return a.cache.rotation.y},set:function(a,b){var c=b.match(/^([-?0-9]+)/);if(!c)return this;d(a).cssanimate({rotatey:c[1]},0)}};d.cssHooks.rotatez={get:function(a){return a.cache.rotation.z},set:function(a,b){var c=
b.match(/^([-?0-9]+)/);if(!c)return this;d(a).cssanimate({rotatez:c[1]},0)}};d.cssHooks.scale={get:function(a){return{x:a.cache.scale.x,y:a.cache.scale.y,z:a.cache.scale.z}},set:function(a,b){d(a).cssanimate({scale:b},0)}};d.cssHooks.scalex={get:function(a){return a.cache.scale.x},set:function(a,b){var c=b.match(/^([-?0-9]+)/);if(!c)return this;d(a).cssanimate({scalex:c[1]},0)}};d.cssHooks.scaley={get:function(a){return a.cache.scale.y},set:function(a,b){var c=b.match(/^([-?0-9]+)/);if(!c)return this;
d(a).cssanimate({scaley:c[1]},0)}};d.cssHooks.scalez={get:function(a){return a.cache.scale.z},set:function(a,b){var c=b.match(/^([-?0-9]+)/);if(!c)return this;d(a).cssanimate({scalez:c[1]},0)}};d.cssHooks.skew={get:function(a){return{x:a.cache.skew.x,y:a.cache.skew.y,z:a.cache.skew.z}},set:function(a,b){d(a).cssanimate({skew:b},0)}};d.cssHooks.skewx={get:function(a){return a.cache.skew.x},set:function(a,b){var c=b.match(/^([-?0-9]+)/);if(!c)return this;d(a).cssanimate({skewx:c[1]},0)}};d.cssHooks.skewy=
{get:function(a){return a.cache.skew.y},set:function(a,b){var c=b.match(/^([-?0-9]+)/);if(!c)return this;d(a).cssanimate({skewy:c[1]},0)}};d.fn.origin=function(a,b){return d(this).cssanimate.origin(d(this),a,b)};d.fn.perspective=function(a){return d(this).cssanimate.perspective(d(this),a)};d.fn.to=function(a,b,c,e,d){return a.constructor!==Array?this:this.cssanimate({to:a},b,c,e,d)};d.fn.rotate=function(a,b,c,e,d){return a.constructor!==Array?this:this.cssanimate({rotate:a},b,c,e,d)};d.fn.scale=function(a,
b,c,e,d){return a.constructor!==Array?this:this.cssanimate({scale:a},b,c,e,d)};d.fn.skew=function(a,b,c,e,d){return a.constructor!==Array?this:this.cssanimate({skew:a},b,c,e,d)};d.fn.cssanimate=function(a,b,c,e,l){var a=a||{},k;"function"===typeof b&&(l=b,b=void 0);if(a.constructor===Array)return this.cache=this.cache||new f(d(this)),this.cssanimate.loopback.has_callback=!!l,this.cssanimate.loopback(this,a,l);"function"===typeof c&&(l=c,c=void 0);"function"===typeof e&&(l=e,e=void 0);void 0!==a.duration&&
(b=a.duration,delete a.duration);void 0!==a.delay&&(c=a.delay,delete a.delay);void 0!==a.ease&&(e=a.ease,delete a.ease);void 0!==a.property&&(k=a.property.constructor===Array?a.property.join(","):a.property,delete a.property);var g={duration:"number"===typeof b?b:400,delay:+c||0,ease:r[e]||e||"ease-in-out",style:"flat",property:k||"all"};return this.queue(function(){this.cache=this.cache||new f(d(this));this.cache.compile(g,a).queue(l)})};d.fn._stop=d.fn.stop;d.fn.stop=function(a,b){this.cssanimate.loopback.has_callback&&
(this.cssanimate.stop=!0);return d.fn._stop.apply(this,arguments)};d.fn.cssanimate.loopback=function(a,b,c){var e=[];b.forEach(function(a,b){e[b]=d.extend(!0,{},a)});e.forEach(function(b){a.cssanimate(b[0],b[1],b[2],b[3],b[4])});a.queue(function(){this.step=++this.step||1;"function"===typeof c&&d.proxy(c,a)(this.step);if(a.cssanimate.stop)return a.cssanimate.stop=!1,a.dequeue(),a;this.cache=new f(d(this));a.cssanimate(b,c);a.dequeue()});return a};d.fn.cssanimate.origin=function(a,b,c){d(a).queue(function(){d(a).css(f.property("transform-origin"),
h("{0} {1}").format(b,c));for(var e=0;!d(a).css(f.property("transform-origin"))&&!(50<++e););d(a).dequeue()});return a};d.fn.cssanimate.perspective=function(a,b){d(a).queue(function(){d(a).parent().css(f.property("perspective"),h("{0}px").format(+b||0));for(var c=0;!d(a).parent().css(f.property("perspective"))&&!(50<++c););d(a).dequeue()});return a};var r={"in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)","ease-in-quad":"cubic-bezier(0.550, 0.085, 0.680, 0.530)",
"ease-in-cubic":"cubic-bezier(0.550, 0.055, 0.675, 0.190)","ease-in-quart":"cubic-bezier(0.895, 0.030, 0.685, 0.220)","ease-in-quint":"cubic-bezier(0.755, 0.050, 0.855, 0.060)","ease-in-sine":"cubic-bezier(0.470, 0.000, 0.745, 0.715)","ease-in-expo":"cubic-bezier(0.950, 0.050, 0.795, 0.035)","ease-in-circ":"cubic-bezier(0.600, 0.040, 0.980, 0.335)","ease-in-back":"cubic-bezier(0.600, -0.280, 0.735, 0.045)","ease-out-quad":"cubic-bezier(0.250, 0.460, 0.450, 0.940)","ease-out-cubic":"cubic-bezier(0.215, 0.610, 0.355, 1.000)",
"ease-out-quart":"cubic-bezier(0.165, 0.840, 0.440, 1.000)","ease-out-quint":"cubic-bezier(0.230, 1.000, 0.320, 1.000)","ease-out-sine":"cubic-bezier(0.390, 0.575, 0.565, 1.000)","ease-out-expo":"cubic-bezier(0.190, 1.000, 0.220, 1.000)","ease-out-circ":"cubic-bezier(0.075, 0.820, 0.165, 1.000)","ease-out-back":"cubic-bezier(0.175, 0.885, 0.320, 1.275)","ease-out-quad":"cubic-bezier(0.455, 0.030, 0.515, 0.955)","ease-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1.000)","ease-in-out-quart":"cubic-bezier(0.770, 0.000, 0.175, 1.000)",
"ease-in-out-quint":"cubic-bezier(0.860, 0.000, 0.070, 1.000)","ease-in-out-sine":"cubic-bezier(0.445, 0.050, 0.550, 0.950)","ease-in-out-expo":"cubic-bezier(1.000, 0.000, 0.000, 1.000)","ease-in-out-circ":"cubic-bezier(0.785, 0.135, 0.150, 0.860)","ease-in-out-back":"cubic-bezier(0.680, -0.550, 0.265, 1.550)"},f=function(a){this.elem=a;this.executable={};this.position=new i;this.rotation=new i;this.scale=new i(1,1,1);this.skew=new o};f.prefix=function(){var a=d("<div>")[0],b={WebkitTransition:"-webkit-",
MozTransition:"-moz-",MSTransition:"-ms-",OTransition:"-o-"};for(p in b)if(p in a.style)return b[p];return""}();f.transitionEvent=function(){var a=d("<div>")[0],b={WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd",Transition:"transitionEnd"},c;for(c in b)if(c in a.style)return b[c];return null}();f.property=function(a){var b=d("<div>")[0],c=f.prefix,c=h("{0}{1}").format(c,a);return void 0!==b.style[c]?c:a};f.prototype.compile=
function(a,b){this.parse(b);this.executable=d.extend(!0,{},this.build(a,b));return this};f.prototype.clear=function(){var a={};["transition-property","transition-timing-function","transition-duration","transform-style","transition-delay"].forEach(function(b){a[f.property(b)]=""});d(this).css(a)};f.prototype.queue=function(a){var b=this,c=f.property("transition-duration"),e=function(){this.is_animated=!0;for(var e=function(){d(this).unbind(f.transitionEvent,d.proxy(e,this));"function"===typeof a&&
d.proxy(a,this)();0===d(this).queue().length&&d.proxy(b.clear,this)();this.is_animated=!1;d(this).dequeue()},k=0;!d(this).css(c)&&!(50<++k););if(b.executable[c].match(/^0/)){d(this).css(b.executable);for(k=0;!d(this).css(c).match(/^0/)&&!(50<++k););"function"===typeof a&&d.proxy(a,this)();0===d(this).queue().length&&d.proxy(b.clear,this)();this.is_animated=!1;d(this).dequeue();return this}if(!f.transitionEvent)return d(this).css(b.executable),k=b.executable[c].match(/^([0-9]+)/),setTimeout(d.proxy(a,
this),k[1]),this;d(this).bind(f.transitionEvent,d.proxy(e,this)).css(b.executable);return this};if(this.elem.is_animated)return setTimeout(d.proxy(e,this.elem)),this;d.proxy(e,this.elem)();return this};f.prototype.parse=function(a){this.parseRelativeValue(a);for(var b in a){if("to"==b)this.parseTranslate(a[b]);else if("x"===b)this.position.x=+a[b];else if("y"===b)this.position.y=+a[b];else if("z"===b)this.position.z=+a[b];else if("rotate"===b)this.parseRotation(a[b]);else if("rotatex"===b)this.rotation.x=
+a[b];else if("rotatey"===b)this.rotation.y=+a[b];else if("rotatez"===b)this.rotation.z=+a[b];else if("scale"===b)this.parseScale(a[b]);else if("scalex"===b)this.scale.x=+a[b];else if("scaley"===b)this.scale.y=+a[b];else if("scalez"===b)this.scale.z=+a[b];else if("skew"===b)this.parseSkew(a[b]);else if("skewx"===b)this.skew.x=+a[b];else if("skewy"===b)this.skew.y=+a[b];else continue;delete a[b]}return this};f.prototype.matchRelativeValue=function(a){return a.match(/^(\+=|-=)([0-9]+)$/)};f.prototype.parseRelativeValue=
function(a){var b,c=function(a,b,c){switch(b){case "+=":return a+c;case "-=":return a-c}},e;for(e in a){if(a[e].constructor===String){if(!(b=this.matchRelativeValue(a[e])))continue;switch(e){case "to":a[e]=c(this.position.x,b[1],+b[2]);continue;case "x":a[e]=c(this.position.x,b[1],+b[2]);continue;case "y":a[e]=c(this.position.y,b[1],+b[2]);continue;case "z":a[e]=c(this.position.z,b[1],+b[2]);continue;case "rotate":a[e]=c(this.rotation.z,b[1],+b[2]);continue;case "rotatex":a[e]=c(this.rotation.x,b[1],
+b[2]);continue;case "rotatey":a[e]=c(this.rotation.y,b[1],+b[2]);continue;case "rotatez":a[e]=c(this.rotation.z,b[1],+b[2]);continue;case "scale":a[e]=[c(this.scale.x,b[1],+b[2]),c(this.scale.y,b[1],+b[2])];continue;case "scalex":a[e]=c(this.scale.x,b[1],+b[2]);continue;case "scaley":a[e]=c(this.scale.y,b[1],+b[2]);continue;case "scalez":a[e]=c(this.scale.z,b[1],+b[2]);continue;case "skew":a[e]=[c(this.skew.x,b[1],+b[2]),c(this.skew.y,b[1],+b[2])];continue;case "skewx":a[e]=c(this.skew.x,b[1],+b[2]);
continue;case "skewy":a[e]=c(this.skew.y,b[1],+b[2]);continue}}if("to"===e||"rotate"===e||"scale"===e||"skew"===e){var d;switch(e){case "to":d=this.position;break;case "rotate":d=this.rotation;break;case "scale":d=this.scale;break;case "skew":d=this.skew}a[e].constructor===Array&&(a[e]={x:a[e][0],y:a[e][1],z:a[e][2]});if(void 0!==a[e].x&&(b=this.matchRelativeValue(a[e].x)))a[e].x=c(d.x,b[1],+b[2]);if(void 0!==a[e].y&&(b=this.matchRelativeValue(a[e].y)))a[e].y=c(d.y,b[1],+b[2]);if(void 0!==a[e].z&&
(b=this.matchRelativeValue(a[e].z)))a[e].z=c(d.z,b[1],+b[2])}}};f.prototype.parseTranslate=function(a){if(a.constructor===Array){if(void 0!==a[0]&&(this.position.x=+a[0]),void 0!==a[1]&&(this.position.y=+a[1]),void 0!==a[2])this.position.z=+a[2]}else if(a.constructor===Object){if(void 0!==a.x&&(this.position.x=+a.x),void 0!==a.y&&(this.position.y=+a.y),void 0!==a.z)this.position.z=+a.z}else this.position.x=+a};f.prototype.parseRotation=function(a){if(a.constructor===Array){if(void 0!==a[0]&&(this.rotation.x=
+a[0]),void 0!==a[1]&&(this.rotation.y=+a[1]),void 0!==a[2])this.rotation.z=+a[2]}else if(a.constructor===Object){if(void 0!==a.x&&(this.rotation.x=+a.x),void 0!==a.y&&(this.rotation.y=+a.y),void 0!==a.z)this.rotation.z=+a.z}else this.rotation.z=+a};f.prototype.parseScale=function(a){if(a.constructor===Array){if(void 0!==a[0]&&(this.scale.x=+a[0]),void 0!==a[1]&&(this.scale.y=+a[1]),void 0!==a[2])this.scale.z=+a[2]}else if(a.constructor===Object){if(void 0!==a.x&&(this.scale.x=+a.x),void 0!==a.y&&
(this.scale.y=+a.y),void 0!==a.z)this.scale.z=+a.z}else this.scale.x=this.scale.y=+a};f.prototype.parseSkew=function(a){if(a.constructor===Array){if(void 0!==a[0]&&(this.skew.x=+a[0]),void 0!==a[1])this.skew.y=+a[1]}else if(a.constructor===Object){if(void 0!==a.x&&(this.skew.x=+a.x),void 0!==a.y)this.skew.y=+a.y}else this.skew.x=this.skew.y=+a};f.prototype.build=function(a,b){var c={};c[f.property("transition-property")]=a.property;c[f.property("transition-duration")]=h("{0}ms").format(a.duration);
c[f.property("transition-delay")]=h("{0}ms").format(a.delay);c[f.property("transition-timing-function")]=a.ease;c[f.property("transform-style")]=a.style;c[f.property("transform")]=[this.buildTranslate(),this.buildRotate(),this.buildScale(),this.buildSkew()].join(" ");for(var e in b)c[f.property(e)]=b[e],c[e]=b[e];return c};f.prototype.buildTranslate=function(){return h("translate3d({0}px,{1}px,{2}px)").format(this.position.x,this.position.y,this.position.z)};f.prototype.buildRotate=function(){return h("rotateX({0}deg) rotateY({1}deg) rotateZ({2}deg)").format(this.rotation.x,
this.rotation.y,this.rotation.z)};f.prototype.buildScale=function(){return h("scale3d({0},{1},{2})").format(this.scale.x,this.scale.y,this.scale.z)};f.prototype.buildSkew=function(){return h("skewX({0}deg) skewY({1}deg)").format(this.skew.x,this.skew.y)};var o=function(a,b){this.x=a||0;this.y=b||0};o.prototype={constructor:o,set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=
b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addVectors:function(a,b){this.x=
a.x+b.x;this.y=a.y+b.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},sub:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divideScalar:function(a){0!==a?(this.x/=a,this.y/=a):this.set(0,0);return this},
min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},
normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,a=this.y-a.y;return b*b+a*a},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a){this.x=a[0];this.y=a[1];return this},toArray:function(){return[this.x,
this.y]},clone:function(){return new o(this.x,this.y)}};var i=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};i.prototype={constructor:i,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=
a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,
b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyMatrix3:function(a){var b=this.x,c=this.y,e=this.z,a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*e;this.y=a[1]*b+a[4]*c+a[7]*e;this.z=a[2]*b+a[5]*c+a[8]*e;return this},applyMatrix4:function(a){var b=this.x,c=this.y,e=this.z,a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*e+a[12];this.y=a[1]*b+a[5]*c+a[9]*
e+a[13];this.z=a[2]*b+a[6]*c+a[10]*e+a[14];return this},applyProjection:function(a){var b=this.x,c=this.y,e=this.z,a=a.elements,d=1/(a[3]*b+a[7]*c+a[11]*e+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*e+a[12])*d;this.y=(a[1]*b+a[5]*c+a[9]*e+a[13])*d;this.z=(a[2]*b+a[6]*c+a[10]*e+a[14])*d;return this},applyQuaternion:function(a){var b=this.x,c=this.y,e=this.z,d=a.x,f=a.y,g=a.z,a=a.w,q=a*b+f*e-g*c,j=a*c+g*b-d*e,h=a*e+d*c-f*b,b=-d*b-f*c-g*e;this.x=q*a+b*-d+j*-g-h*-f;this.y=j*a+b*-f+h*-d-q*-g;this.z=h*a+b*-g+q*-f-
j*-d;return this},transformDirection:function(a){var b=this.x,c=this.y,e=this.z,a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*e;this.y=a[1]*b+a[5]*c+a[9]*e;this.z=a[2]*b+a[6]*c+a[10]*e;this.normalize();return this},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){0!==a?(this.x/=a,this.y/=a,this.z/=a):this.z=this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},max:function(a){this.x<
a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*
this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},cross:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),
this.crossVectors(a,b);var c=this.x,e=this.y,d=this.z;this.x=e*a.z-d*a.y;this.y=d*a.x-c*a.z;this.z=c*a.y-e*a.x;return this},crossVectors:function(a,b){this.x=a.y*b.z-a.z*b.y;this.y=a.z*b.x-a.x*b.z;this.z=a.x*b.y-a.y*b.x;return this},angleTo:function(a){a=this.dot(a)/(this.length()*a.length());return Math.acos(THREE.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y,a=this.z-a.z;return b*b+c*c+a*a},setEulerFromRotationMatrix:function(a,
b){function c(a){return Math.min(Math.max(a,-1),1)}var e=a.elements,d=e[0],f=e[4],g=e[8],h=e[1],j=e[5],i=e[9],m=e[2],n=e[6],e=e[10];void 0===b||"XYZ"===b?(this.y=Math.asin(c(g)),0.99999>Math.abs(g)?(this.x=Math.atan2(-i,e),this.z=Math.atan2(-f,d)):(this.x=Math.atan2(n,j),this.z=0)):"YXZ"===b?(this.x=Math.asin(-c(i)),0.99999>Math.abs(i)?(this.y=Math.atan2(g,e),this.z=Math.atan2(h,j)):(this.y=Math.atan2(-m,d),this.z=0)):"ZXY"===b?(this.x=Math.asin(c(n)),0.99999>Math.abs(n)?(this.y=Math.atan2(-m,e),
this.z=Math.atan2(-f,j)):(this.y=0,this.z=Math.atan2(h,d))):"ZYX"===b?(this.y=Math.asin(-c(m)),0.99999>Math.abs(m)?(this.x=Math.atan2(n,e),this.z=Math.atan2(h,d)):(this.x=0,this.z=Math.atan2(-f,j))):"YZX"===b?(this.z=Math.asin(c(h)),0.99999>Math.abs(h)?(this.x=Math.atan2(-i,j),this.y=Math.atan2(-m,d)):(this.x=0,this.y=Math.atan2(g,e))):"XZY"===b&&(this.z=Math.asin(-c(f)),0.99999>Math.abs(f)?(this.x=Math.atan2(n,j),this.y=Math.atan2(g,d)):(this.x=Math.atan2(-i,e),this.y=0));return this},setEulerFromQuaternion:function(a,
b){function c(a){return Math.min(Math.max(a,-1),1)}var e=a.x*a.x,d=a.y*a.y,f=a.z*a.z,g=a.w*a.w;void 0===b||"XYZ"===b?(this.x=Math.atan2(2*(a.x*a.w-a.y*a.z),g-e-d+f),this.y=Math.asin(c(2*(a.x*a.z+a.y*a.w))),this.z=Math.atan2(2*(a.z*a.w-a.x*a.y),g+e-d-f)):"YXZ"===b?(this.x=Math.asin(c(2*(a.x*a.w-a.y*a.z))),this.y=Math.atan2(2*(a.x*a.z+a.y*a.w),g-e-d+f),this.z=Math.atan2(2*(a.x*a.y+a.z*a.w),g-e+d-f)):"ZXY"===b?(this.x=Math.asin(c(2*(a.x*a.w+a.y*a.z))),this.y=Math.atan2(2*(a.y*a.w-a.z*a.x),g-e-d+f),this.z=
Math.atan2(2*(a.z*a.w-a.x*a.y),g-e+d-f)):"ZYX"===b?(this.x=Math.atan2(2*(a.x*a.w+a.z*a.y),g-e-d+f),this.y=Math.asin(c(2*(a.y*a.w-a.x*a.z))),this.z=Math.atan2(2*(a.x*a.y+a.z*a.w),g+e-d-f)):"YZX"===b?(this.x=Math.atan2(2*(a.x*a.w-a.z*a.y),g-e+d-f),this.y=Math.atan2(2*(a.y*a.w-a.x*a.z),g+e-d-f),this.z=Math.asin(c(2*(a.x*a.y+a.z*a.w)))):"XZY"===b&&(this.x=Math.atan2(2*(a.x*a.w+a.y*a.z),g-e+d-f),this.y=Math.atan2(2*(a.x*a.z+a.y*a.w),g+e-d-f),this.z=Math.asin(c(2*(a.z*a.w-a.x*a.y))));return this},getPositionFromMatrix:function(a){this.x=
a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},getScaleFromMatrix:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length(),a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=c;this.z=a;return this},getColumnFromMatrix:function(a,b){var c=4*a,d=b.elements;this.x=d[c];this.y=d[c+1];this.z=d[c+2];return this},equals:function(a){return a.x===this.x&&a.y===this.y&&
a.z===this.z},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];return this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new i(this.x,this.y,this.z)}}})(jQuery);
