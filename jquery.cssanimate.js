/*
 * jquery.cssanimate.js
 *
 * A jQuery plugin provides a stylish and cute animation for your smartphone app.
 *
 * https://github.com/after12am/jquery.cssanimate.js
 *
 * Copyright 2012-2013 Satoshi Okami
 * Released under the MIT license
 */
(function(f){function g(a){return{format:function(b){if("object"==typeof b)return a.replace(/\{(\w+)\}/g,function(a,c){return b[c]});b=Array.prototype.slice.apply(arguments);return ss=b.reduce(function(a,c,h){return a.replace("{i}".replace("i",h),b[h])},a.toString())}}}f.fn.origin=function(a,b){return f(this).cssanimate.origin(f(this),a,b)};f.fn.perspective=function(a){return f(this).cssanimate.perspective(f(this),a)};f.fn.to=function(a,b,d,c,h){return a.constructor!==Array?this:this.cssanimate({to:a},
b,d,c,h)};f.fn.rotate=function(a,b,d,c,h){return a.constructor!==Array?this:this.cssanimate({rotate:a},b,d,c,h)};f.fn.scale=function(a,b,d,c,h){return a.constructor!==Array?this:this.cssanimate({scale:a},b,d,c,h)};f.fn.skew=function(a,b,d,c,h){return a.constructor!==Array?this:this.cssanimate({skew:a},b,d,c,h)};f.fn.cssanimate=function(a,b,d,c,h){var a=a||{},g;if(a.constructor===Array)return this.cache=this.cache||new e(f(this)),this.cssanimate.loopback(this,a);"function"===typeof b&&(h=b,b=void 0);
"function"===typeof d&&(h=d,d=void 0);"function"===typeof c&&(h=c,c=void 0);void 0!==a.duration&&(b=a.duration,delete a.duration);void 0!==a.delay&&(d=a.delay,delete a.delay);void 0!==a.ease&&(c=a.ease,delete a.ease);void 0!==a.property&&(g=a.property.constructor===Array?a.property.join(","):a.property,delete a.property);var q={duration:"number"===typeof b?b:400,delay:d||0,ease:o[c]||c||"ease-in-out",style:"flat",property:g||"all"};return this.queue(function(){this.cache=this.cache||new e(f(this));
this.cache.compile(q,a).queue(h)})};f.fn.cssanimate.loopback=function(a,b){var d=[];b.forEach(function(a,b){d[b]=f.extend(!0,{},a)});d.forEach(function(b){a.cssanimate(b[0],b[1],b[2],b[3],b[4])});a.queue(function(){a.cssanimate(b);a.dequeue()});return a};f.fn.cssanimate.origin=function(a,b,d){f(a).queue(function(){f(a).css(e.property("origin"),g("{0} {1}").format(b,d));for(var c=0;!f(a).css(e.property("origin"))&&!(50<++c););f(a).dequeue()});return a};f.fn.cssanimate.perspective=function(a,b){f(a).queue(function(){f(a).parent().css(e.property("perspective"),
g("{0}px").format(+b||0));for(var d=0;!f(a).parent().css(e.property("perspective"))&&!(50<++d););f(a).dequeue()});return a};var o={"in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)","ease-in-quad":"cubic-bezier(0.550, 0.085, 0.680, 0.530)","ease-in-cubic":"cubic-bezier(0.550, 0.055, 0.675, 0.190)","ease-in-quart":"cubic-bezier(0.895, 0.030, 0.685, 0.220)","ease-in-quint":"cubic-bezier(0.755, 0.050, 0.855, 0.060)","ease-in-sine":"cubic-bezier(0.470, 0.000, 0.745, 0.715)",
"ease-in-expo":"cubic-bezier(0.950, 0.050, 0.795, 0.035)","ease-in-circ":"cubic-bezier(0.600, 0.040, 0.980, 0.335)","ease-in-back":"cubic-bezier(0.600, -0.280, 0.735, 0.045)","ease-out-quad":"cubic-bezier(0.250, 0.460, 0.450, 0.940)","ease-out-cubic":"cubic-bezier(0.215, 0.610, 0.355, 1.000)","ease-out-quart":"cubic-bezier(0.165, 0.840, 0.440, 1.000)","ease-out-quint":"cubic-bezier(0.230, 1.000, 0.320, 1.000)","ease-out-sine":"cubic-bezier(0.390, 0.575, 0.565, 1.000)","ease-out-expo":"cubic-bezier(0.190, 1.000, 0.220, 1.000)",
"ease-out-circ":"cubic-bezier(0.075, 0.820, 0.165, 1.000)","ease-out-back":"cubic-bezier(0.175, 0.885, 0.320, 1.275)","ease-out-quad":"cubic-bezier(0.455, 0.030, 0.515, 0.955)","ease-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1.000)","ease-in-out-quart":"cubic-bezier(0.770, 0.000, 0.175, 1.000)","ease-in-out-quint":"cubic-bezier(0.860, 0.000, 0.070, 1.000)","ease-in-out-sine":"cubic-bezier(0.445, 0.050, 0.550, 0.950)","ease-in-out-expo":"cubic-bezier(1.000, 0.000, 0.000, 1.000)","ease-in-out-circ":"cubic-bezier(0.785, 0.135, 0.150, 0.860)",
"ease-in-out-back":"cubic-bezier(0.680, -0.550, 0.265, 1.550)"},e=function(a){this.elem=a;this.executable={};this.position=new i(0,0,0);this.rotation=new i(0,0,0);this.scale=new i(1,1,1);this.skew=new n(0,0);this.filter={contrast:"contrast(100%)",brightness:"brightness(100%)",grayscale:"grayscale(0%)",saturate:"saturate(100%)",opacity:"opacity(100%)",invert:"invert(0%)",hue:"hue-rotate(0deg)",sepia:"sepia(0%)",blur:"blur(0px)",shadow:"drop-shadow(rgb(0, 0, 0) 0px 0px)"}};e.prefix=function(){var a=
f("<div>")[0],b={WebkitTransition:"-webkit-",MozTransition:"-moz-",MSTransition:"-ms-",OTransition:"-o-"};for(p in b)if(p in a.style)return b[p];return""}();e.transitionEvent=function(){var a=f("<div>")[0],b={WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd"},d;for(d in b)if(d in a.style)return b[d];return"transitionEnd"}();e.property=function(a){var b=f("<div>")[0],d=e.prefix,c={transform:g("{0}transform").format(d),
origin:g("{0}transform-origin").format(d),duration:g("{0}transition-duration").format(d),property:g("{0}transition-property").format(d),delay:g("{0}transition-delay").format(d),ease:g("{0}transition-timing-function").format(d),style:g("{0}transition-style").format(d),perspective:g("{0}perspective").format(d)},d=g("{0}{1}").format(d,a);return c[a]?c[a]:void 0!==b.style[d]?d:a};e.prototype.compile=function(a,b){this.parse(b);this.executable=f.extend(!0,{},this.build(a,b));return this};e.prototype.queue=
function(a){var b=this,d=function(){this.is_animated=!0;for(var c=function(){f(this).unbind(e.transitionEvent,f.proxy(c,this));"function"===typeof a&&f.proxy(a,this)();f(this).dequeue();this.is_animated=!1},d=0;!f(this).css(e.property("duration"))&&!(50<++d););if(b.executable[e.property("duration")].match(/^0/)){f(this).css(b.executable);for(d=0;!f(this).css(e.property("duration")).match(/^0/)&&!(50<++d););"function"===typeof a&&f.proxy(a,this)();f(this).dequeue();return this}f(this).bind(e.transitionEvent,
f.proxy(c,this)).css(b.executable);return this};if(this.elem.is_animated)return setTimeout(f.proxy(d,this.elem)),this;f.proxy(d,this.elem)();return this};e.prototype.parse=function(a){for(var b in a)"style"===b?delete a[b]:"origin"===b?delete a[b]:"perspective"===b?delete a[b]:b.match(/transform$/)?delete a[b]:b.match(/transform-origin$/)?delete a[b]:b.match(/transition-duration$/)?delete a[b]:b.match(/transition-property$/)?delete a[b]:b.match(/transition-delete$/)?delete a[b]:b.match(/transition-timing-function$/)?
delete a[b]:b.match(/transition-style$/)&&delete a[b];for(b in a){if("to"==b)this.parseTranslate(a[b]);else if("x"==b)this.position.x=a[b];else if("y"==b)this.position.y=a[b];else if("z"==b)this.position.z=a[b];else if("rotate"==b)this.parseRotation(a[b]);else if("rotatex"==b)this.rotation.x=a[b];else if("rotatey"==b)this.rotation.y=a[b];else if("rotatez"==b)this.rotation.z=a[b];else if("scale"==b)this.parseScale(a[b]);else if("scalex"==b)this.scale.x=a[b];else if("scaley"==b)this.scale.y=a[b];else if("scalez"==
b)this.scale.z=a[b];else if("skew"==b)this.parseSkew(a[b]);else if("skewx"==b)this.skew.x=a[b];else if("skewy"==b)this.skew.y=a[b];else continue;delete a[b]}return this};e.prototype.build=function(a,b){var d={};d[e.property("property")]=a.property;d[e.property("duration")]=g("{0}ms").format(a.duration);d[e.property("delay")]=g("{0}ms").format(a.delay);d[e.property("ease")]=a.ease;d[e.property("style")]=a.style;d[e.property("transform")]=[this.buildTranslate(),this.buildRotate(),this.buildScale(),
this.buildSkew()].join(" ");if(b.filter){for(var c in b.filter)"grayscale"==c?this.filter.grayscale=this.buildGrayscale(b.filter[c]):"sepia"==c?this.filter.sepia=this.buildSepia(b.filter[c]):"saturate"==c?this.filter.saturate=this.buildSaturate(b.filter[c]):"hue"==c?this.filter.hue=this.buildHueRotate(b.filter[c]):"invert"==c?this.filter.invert=this.buildInvert(b.filter[c]):"opacity"==c?this.filter.opacity=this.buildOpacity(b.filter[c]):"brightness"==c?this.filter.brightness=this.buildBrightness(b.filter[c]):
"contrast"==c?this.filter.contrast=this.buildContrast(b.filter[c]):"blur"==c?this.filter.blur=this.buildBlur(b.filter[c]):"shadow"==c&&(this.filter.shadow=this.buildDropShadow(b.filter[c]));delete b.filter}var h=[];for(c in this.filter)h.push(this.filter[c]);0<h.length&&(d[e.property("filter")]=h.join(" "),d.filter=h.join(" "));for(c in b)d[e.property(c)]=b[c],d[c]=b[c];return d};e.prototype.parseTranslate=function(a){a.constructor===Array&&this.parseTranslateArrayInitialiser(a);a.constructor===Object&&
this.parseTranslateObjectInitialiser(a);a.constructor===Number&&(this.position.x=a)};e.prototype.parseTranslateObjectInitialiser=function(a){void 0!==a.x&&a.x.constructor===Number&&(this.position.x=a.x);void 0!==a.y&&a.y.constructor===Number&&(this.position.y=a.y);void 0!==a.z&&a.z.constructor===Number&&(this.position.z=a.z)};e.prototype.parseTranslateArrayInitialiser=function(a){void 0!==a[0]&&a[0].constructor===Number&&(this.position.x=a[0]);void 0!==a[1]&&a[1].constructor===Number&&(this.position.y=
a[1]);void 0!==a[2]&&a[2].constructor===Number&&(this.position.z=a[2])};e.prototype.parseRotation=function(a){a.constructor===Array&&this.parseRotationArrayInitialiser(a);a.constructor===Object&&this.parseRotationObjectInitialiser(a);a.constructor===Number&&(this.rotation.z=a)};e.prototype.parseRotationObjectInitialiser=function(a){void 0!==a.x&&a.x.constructor===Number&&(this.rotation.x=a.x);void 0!==a.y&&a.y.constructor===Number&&(this.rotation.y=a.y);void 0!==a.z&&a.z.constructor===Number&&(this.rotation.z=
a.z)};e.prototype.parseRotationArrayInitialiser=function(a){void 0!==a[0]&&a[0].constructor===Number&&(this.rotation.x=a[0]);void 0!==a[1]&&a[1].constructor===Number&&(this.rotation.y=a[1]);void 0!==a[2]&&a[2].constructor===Number&&(this.rotation.z=a[2])};e.prototype.parseScale=function(a){a.constructor===Array&&this.parseScaleArrayInitialiser(a);a.constructor===Object&&this.parseScaleObjectInitialiser(a);a.constructor===Number&&(this.scale.x=this.scale.y=a)};e.prototype.parseScaleObjectInitialiser=
function(a){void 0!==a.x&&a.x.constructor===Number&&(this.scale.x=a.x);void 0!==a.y&&a.y.constructor===Number&&(this.scale.y=a.y);void 0!==a.z&&a.z.constructor===Number&&(this.scale.z=a.z)};e.prototype.parseScaleArrayInitialiser=function(a){void 0!==a[0]&&a[0].constructor===Number&&(this.scale.x=a[0]);void 0!==a[1]&&a[1].constructor===Number&&(this.scale.y=a[1]);void 0!==a[2]&&a[2].constructor===Number&&(this.scale.z=a[2])};e.prototype.parseSkew=function(a){a.constructor===Array&&this.parseSkewArrayInitialiser(a);
a.constructor===Object&&this.parseSkewObjectInitialiser(a);a.constructor===Number&&(this.skew.x=this.skew.y=a)};e.prototype.parseSkewObjectInitialiser=function(a){void 0!==a.x&&a.x.constructor===Number&&(this.skew.x=a.x);void 0!==a.y&&a.y.constructor===Number&&(this.skew.y=a.y)};e.prototype.parseSkewArrayInitialiser=function(a){void 0!==a[0]&&a[0].constructor===Number&&(this.skew.x=a[0]);void 0!==a[1]&&a[1].constructor===Number&&(this.skew.y=a[1])};e.prototype.buildTranslate=function(){return g("translate3d({0}px,{1}px,{2}px)").format(this.position.x||
0,this.position.y||0,this.position.z||0)};e.prototype.buildRotate=function(){return g("rotateX({0}deg) rotateY({1}deg) rotateZ({2}deg)").format(this.rotation.x||0,this.rotation.y||0,this.rotation.z||0)};e.prototype.buildScale=function(){return g("scale3d({0},{1},{2})").format(this.scale.x,this.scale.y,this.scale.z)};e.prototype.buildSkew=function(){return g("skewX({0}deg) skewY({1}deg)").format(this.skew.x||0,this.skew.y||0)};e.prototype.buildGrayscale=function(a){return g("grayscale({0}%)").format(a||
0)};e.prototype.buildSepia=function(a){return g("sepia({0}%)").format(a||0)};e.prototype.buildSaturate=function(a){return g("saturate({0}%)").format(a||0)};e.prototype.buildHueRotate=function(a){return g("hue-rotate({0}deg)").format(a||0)};e.prototype.buildInvert=function(a){return g("invert({0}%)").format(a||0)};e.prototype.buildOpacity=function(a){return g("opacity({0}%)").format(a||0)};e.prototype.buildBrightness=function(a){return g("brightness({0}%)").format(a||0)};e.prototype.buildContrast=
function(a){return g("contrast({0}%)").format(a||0)};e.prototype.buildBlur=function(a){return g("blur({0}px)").format(a||0)};e.prototype.buildDropShadow=function(a){return a.constructor===Array&&(shadow=this.buildDropShadowArrayInitialiser(a))?shadow:"drop-shadow(0px 0px #000)"};e.prototype.buildDropShadowArrayInitialiser=function(a){var b="";a.forEach(function(d,c){d.constructor===String&&!d.match(/^[0-9]+/)&&(b=d,a.splice(c,1))});if(2===a.length)return g("drop-shadow({0}px {1}px {2})").format(a[0]||
0,a[1]||0,b||"#000");if(3===a.length)return g("drop-shadow({0}px {1}px {2}px {3})").format(a[0]||0,a[1]||0,a[2]||0,b||"#000");if(4===a.length)return g("drop-shadow({0}px {1}px {2}px {3} {4})").format(a[0]||0,a[1]||0,a[2]||0,a[3]||0,b||"#000")};var n=function(a,b){this.x=a||0;this.y=b||0};n.prototype={constructor:n,set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;
case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addVectors:function(a,b){this.x=a.x+b.x;
this.y=a.y+b.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},sub:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divideScalar:function(a){0!==a?(this.x/=a,this.y/=a):this.set(0,0);return this},min:function(a){this.x>
a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},
distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,a=this.y-a.y;return b*b+a*a},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a){this.x=a[0];this.y=a[1];return this},toArray:function(){return[this.x,this.y]},clone:function(){return new n(this.x,
this.y)}};var i=function(a,b,d){this.x=a||0;this.y=b||0;this.z=d||0};i.prototype={constructor:i,set:function(a,b,d){this.x=a;this.y=b;this.z=d;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;
case 2:return this.z;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},
sub:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;
this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyMatrix3:function(a){var b=this.x,d=this.y,c=this.z,a=a.elements;this.x=a[0]*b+a[3]*d+a[6]*c;this.y=a[1]*b+a[4]*d+a[7]*c;this.z=a[2]*b+a[5]*d+a[8]*c;return this},applyMatrix4:function(a){var b=this.x,d=this.y,c=this.z,a=a.elements;this.x=a[0]*b+a[4]*d+a[8]*c+a[12];this.y=a[1]*b+a[5]*d+a[9]*c+a[13];this.z=
a[2]*b+a[6]*d+a[10]*c+a[14];return this},applyProjection:function(a){var b=this.x,d=this.y,c=this.z,a=a.elements,e=1/(a[3]*b+a[7]*d+a[11]*c+a[15]);this.x=(a[0]*b+a[4]*d+a[8]*c+a[12])*e;this.y=(a[1]*b+a[5]*d+a[9]*c+a[13])*e;this.z=(a[2]*b+a[6]*d+a[10]*c+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,d=this.y,c=this.z,e=a.x,f=a.y,g=a.z,a=a.w,k=a*b+f*c-g*d,j=a*d+g*b-e*c,l=a*c+e*d-f*b,b=-e*b-f*d-g*c;this.x=k*a+b*-e+j*-g-l*-f;this.y=j*a+b*-f+l*-e-k*-g;this.z=l*a+b*-g+k*-f-j*-e;return this},
transformDirection:function(a){var b=this.x,d=this.y,c=this.z,a=a.elements;this.x=a[0]*b+a[4]*d+a[8]*c;this.y=a[1]*b+a[5]*d+a[9]*c;this.z=a[2]*b+a[6]*d+a[10]*c;this.normalize();return this},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){0!==a?(this.x/=a,this.y/=a,this.z/=a):this.z=this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},max:function(a){this.x<a.x&&(this.x=a.x);
this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+
Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},cross:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var d=this.x,c=this.y,e=this.z;this.x=
c*a.z-e*a.y;this.y=e*a.x-d*a.z;this.z=d*a.y-c*a.x;return this},crossVectors:function(a,b){this.x=a.y*b.z-a.z*b.y;this.y=a.z*b.x-a.x*b.z;this.z=a.x*b.y-a.y*b.x;return this},angleTo:function(a){a=this.dot(a)/(this.length()*a.length());return Math.acos(THREE.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,d=this.y-a.y,a=this.z-a.z;return b*b+d*d+a*a},setEulerFromRotationMatrix:function(a,b){function d(a){return Math.min(Math.max(a,
-1),1)}var c=a.elements,e=c[0],f=c[4],g=c[8],k=c[1],j=c[5],l=c[9],i=c[2],m=c[6],c=c[10];void 0===b||"XYZ"===b?(this.y=Math.asin(d(g)),0.99999>Math.abs(g)?(this.x=Math.atan2(-l,c),this.z=Math.atan2(-f,e)):(this.x=Math.atan2(m,j),this.z=0)):"YXZ"===b?(this.x=Math.asin(-d(l)),0.99999>Math.abs(l)?(this.y=Math.atan2(g,c),this.z=Math.atan2(k,j)):(this.y=Math.atan2(-i,e),this.z=0)):"ZXY"===b?(this.x=Math.asin(d(m)),0.99999>Math.abs(m)?(this.y=Math.atan2(-i,c),this.z=Math.atan2(-f,j)):(this.y=0,this.z=Math.atan2(k,
e))):"ZYX"===b?(this.y=Math.asin(-d(i)),0.99999>Math.abs(i)?(this.x=Math.atan2(m,c),this.z=Math.atan2(k,e)):(this.x=0,this.z=Math.atan2(-f,j))):"YZX"===b?(this.z=Math.asin(d(k)),0.99999>Math.abs(k)?(this.x=Math.atan2(-l,j),this.y=Math.atan2(-i,e)):(this.x=0,this.y=Math.atan2(g,c))):"XZY"===b&&(this.z=Math.asin(-d(f)),0.99999>Math.abs(f)?(this.x=Math.atan2(m,j),this.y=Math.atan2(g,e)):(this.x=Math.atan2(-l,c),this.y=0));return this},setEulerFromQuaternion:function(a,b){function d(a){return Math.min(Math.max(a,
-1),1)}var c=a.x*a.x,e=a.y*a.y,f=a.z*a.z,g=a.w*a.w;void 0===b||"XYZ"===b?(this.x=Math.atan2(2*(a.x*a.w-a.y*a.z),g-c-e+f),this.y=Math.asin(d(2*(a.x*a.z+a.y*a.w))),this.z=Math.atan2(2*(a.z*a.w-a.x*a.y),g+c-e-f)):"YXZ"===b?(this.x=Math.asin(d(2*(a.x*a.w-a.y*a.z))),this.y=Math.atan2(2*(a.x*a.z+a.y*a.w),g-c-e+f),this.z=Math.atan2(2*(a.x*a.y+a.z*a.w),g-c+e-f)):"ZXY"===b?(this.x=Math.asin(d(2*(a.x*a.w+a.y*a.z))),this.y=Math.atan2(2*(a.y*a.w-a.z*a.x),g-c-e+f),this.z=Math.atan2(2*(a.z*a.w-a.x*a.y),g-c+e-f)):
"ZYX"===b?(this.x=Math.atan2(2*(a.x*a.w+a.z*a.y),g-c-e+f),this.y=Math.asin(d(2*(a.y*a.w-a.x*a.z))),this.z=Math.atan2(2*(a.x*a.y+a.z*a.w),g+c-e-f)):"YZX"===b?(this.x=Math.atan2(2*(a.x*a.w-a.z*a.y),g-c+e-f),this.y=Math.atan2(2*(a.y*a.w-a.x*a.z),g+c-e-f),this.z=Math.asin(d(2*(a.x*a.y+a.z*a.w)))):"XZY"===b&&(this.x=Math.atan2(2*(a.x*a.w+a.y*a.z),g-c+e-f),this.y=Math.atan2(2*(a.x*a.z+a.y*a.w),g+c-e-f),this.z=Math.asin(d(2*(a.z*a.w-a.x*a.y))));return this},getPositionFromMatrix:function(a){this.x=a.elements[12];
this.y=a.elements[13];this.z=a.elements[14];return this},getScaleFromMatrix:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),d=this.set(a.elements[4],a.elements[5],a.elements[6]).length(),a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=d;this.z=a;return this},getColumnFromMatrix:function(a,b){var d=4*a,c=b.elements;this.x=c[d];this.y=c[d+1];this.z=c[d+2];return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a){this.x=
a[0];this.y=a[1];this.z=a[2];return this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new i(this.x,this.y,this.z)}}})(jQuery);
