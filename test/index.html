<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>jQuery cssanimate tests</title>
<script>
/*
 * Dynamic script loading
 */

(function() {
    var m = location.search.match(/jquery=([^&$]*)/);
    var jQueryVersion = m ? m[1] : "1.8.1";

    function addScript(src) {
        document.write("<scr"+"ipt src='"+src+"'></scr"+"ipt>");
    }

    // Dynamically load jQuery depending on what's passed on get params.
    if (jQueryVersion === "1.9.0b1") {
        addScript("http://code.jquery.com/jquery-1.9.0b1.js");
        addScript("http://code.jquery.com/jquery-migrate-1.0.0b1.js");
    } else {
        addScript("http://ajax.googleapis.com/ajax/libs/jquery/"+jQueryVersion+"/jquery.min.js");
    }
    addScript("../jquery.cssanimate.js");
})();
</script>
<script src="test.js"></script>
<link href="style.css" rel="stylesheet" />
</head>
<body>
<div class='use'>
    Use:
    <a href='index.html?jquery=1.9.0b1'>jQ 1.9.0b1</a>
    <a href='index.html?jquery=1.8.1'>jQ 1.8</a>
    <a href='index.html?jquery=1.7.0'>jQ 1.7</a>
    <a href='index.html?jquery=1.6.0'>jQ 1.6</a>
    <a href='index.html?jquery=1.5.0'>jQ 1.5</a>
    <button class='play-all'>Play all</button>
</div>
<div class='tests'></div>
<script>

group('Translate');

test('x y z:[Number]', function($box) {
    $box.perspective(100)
        .cssanimate({ 
            x: 32, y: 32, z: -100
        })
});

test('to:[Object]', function($box) {
    $box.perspective(100)
        .cssanimate({ 
            to: { x: 32, y: 32, z: -100 }
        })
});

test('to:[Array]', function($box) {
    $box.perspective(100)
        .cssanimate({ 
            to: [32, 32, -100]
        })
});

test('to:[Array]', function($box) {
    $box.perspective(100)
        .cssanimate({ 
            to: [32, 32]
        })
});

test('to:[Array]', function($box) {
    $box.perspective(100)
        .cssanimate({ 
            to: [32]
        })
});

test('to:[Number]', function($box) {
    $box.perspective(100)
        .cssanimate({ 
            to: 32
        })
});

test('Method chain', function($box) {
    $box.perspective(100)
        .cssanimate({ x: 32 })
        .cssanimate({ y: 32 })
        .cssanimate({ z: -100 })
});

test('Duration', function($box) {
    $box.perspective(100)
        .cssanimate({ x: 32 }, 100)
        .cssanimate({ y: 32 }, 1000)
        .cssanimate({ z: -100 }, 100)
});

group('Rotate');

test('rotate x y z:[Number]', function($box) {
    $box.perspective(100)
        .cssanimate({ 
            rotatex: 32, rotatey: 32, 
            rotatez: -100 })
});

test('rotate:[Object]', function($box) {
    $box.perspective(100)
        .cssanimate({ 
            rotate: { x: 32, y: 32, z: -100 }
        })
});

test('rotate:[Array]', function($box) {
    $box.perspective(100)
        .cssanimate({ 
            rotate: [32, 32, -100]
        })
});

test('rotate:[Array]', function($box) {
    $box.perspective(100)
        .cssanimate({ 
            rotate: [32, 32]
        })
});

test('rotate:[Array]', function($box) {
    $box.perspective(100)
        .cssanimate({ 
            rotate: [32]
        })
});

test('rotate:[Number]', function($box) {
    $box.perspective(100)
        .cssanimate({ 
            rotate: 32
        })
});

test('Method chain', function($box) {
    $box.perspective(100)
        .cssanimate({ rotatex: 32 })
        .cssanimate({ rotatey: 32 })
        .cssanimate({ rotatez: -100 })
});

test('Duration', function($box) {
    $box.perspective(100)
        .cssanimate({ rotatex: 32 }, 100)
        .cssanimate({ rotatey: 32 }, 1000)
        .cssanimate({ rotatez: -100 }, 100)
});

test('Origin', function($box) {
    $box.origin(0, 0)
        .cssanimate({ rotate: 60 })
        
    ;
});

group('Scale');

test('x y z:[Number]', function($box) {
    $box
        .cssanimate({ 
            scalex: 2, scaley: 2
        })
});

test('scale:[Object]', function($box) {
    $box
        .cssanimate({ 
            scale: { x: 2, y: 2 }
        })
});

test('scale:[Array]', function($box) {
    $box
        .cssanimate({ 
            scale: [2, 2] 
        })
});

test('scale:[Array]', function($box) {
    $box
        .cssanimate({ 
            scale: [2] 
        })
});

test('scale:[Number]', function($box) {
    $box
        .cssanimate({ 
            scale: 2
        })
});

test('Method chain', function($box) {
    $box
        .cssanimate({ scalex: 2 })
        .cssanimate({ scaley: 2 })
    ;
});

test('Duration', function($box) {
    $box
        .cssanimate({ scalex: 2 }, 100)
        .cssanimate({ scaley: 2 }, 1000)
    ;
});

test('3d', function($box) {
    $box.perspective(100)
        .cssanimate({ scalex: 2, scaley: 2 })
        .cssanimate({ rotatey: 45 })
    ;
});

group('Skew');

test('x y z:[Number]', function($box) {
    $box.perspective(100)
        .cssanimate({ 
            skewx: 32, skewy: 32
        })
});

test('skew:[Object]', function($box) {
    $box.perspective(100)
        .cssanimate({ 
            skew: { x: 32, y: 32 }
        })
});

test('skew:[Array]', function($box) {
    $box.perspective(100)
        .cssanimate({ 
            skew: [32, 32]
        })
});

test('skew:[Array]', function($box) {
    $box.perspective(100)
        .cssanimate({ 
            skew: [32]
        })
});

test('skew:[Number]', function($box) {
    $box.perspective(100)
        .cssanimate({ 
            skew: 32
        })
});

test('Method chain', function($box) {
    $box.perspective(100)
        .cssanimate({ skewx: 32 })
        .cssanimate({ skewy: 32 })
    ;
});

test('Duration', function($box) {
    $box.perspective(100)
        .cssanimate({ skewx: 32 }, 100)
        .cssanimate({ skewy: 32 }, 1000)
    ;
});

group('Duration');

test('Default 400ms', function($box) {
    $box.cssanimate({ x:45, rotatez:45 })
    ;
});

test('0 duration', function($box) {
    $box.cssanimate({ x:45, rotatez:45 }, 0)
    ;
});

test('As the option', function($box) {
    $box.cssanimate({ x:45, rotatez:45, duration: 400 })
});

test('As the argument', function($box) {
    $box.cssanimate({ x:45, rotatez:45 }, 400)
    ;
});

group('Delay');

test('Default 0ms', function($box) {
    $box
        .cssanimate({ x:45, rotatez:45 }, 400)
    
    
    ;
});

test('Default 0ms', function($box) {
    $box
        .cssanimate({x:45, rotatez:45}, 400, 0)
    
    
    ;
});

test('400ms delay', function($box) {
    var s = +new Date();
    $box.cssanimate({ x:45, rotatez:45 }, 400, 400, function() {
        $box.append((+new Date() - s - 400));
    })
});

test('As the option', function($box) {
    var s = +new Date();
    $box.cssanimate({ x:45, rotatez:45, delay: 400 }, function() {
        $box.append((+new Date() - s - 400));
    })
});

test('As the argument', function($box) {
    var s = +new Date();
    $box.cssanimate({ x:45, rotatez:45 }, 400, 400, function() {
        $box.append((+new Date() - s - 400));
    })
});

group('Ease');

test('Default', function($box) {
    $box.cssanimate({
        x:90
    })
});

test('As the option', function($box) {
    $box.cssanimate({
        x:90, ease: 'snap'
    })
});

test('As the argument', function($box) {
    $box.cssanimate(
        { x:90 }, 400, 0, 'snap'
    )
});

test('in', function($box) {
    $box.cssanimate({
        x:90, ease: 'in'
    })
});

test('cubic-bezier', function($box) {
    $box.cssanimate({
        x: 90, ease: 'cubic-bezier(0,1,.5,1)'
    });
});

group('Callback');

test('As the 2nd argument', function($box) {
    $box.cssanimate({x:45},function() {
        $box.append('OK');
    })
});

test('As the 3rd argument', function($box) {
    $box.cssanimate({x:45},400,function() {
        $box.append('OK');
    })
});

test('As the 4th argument', function($box) {
    $box.cssanimate({x:45},400,400,function() {
        $box.append('OK');
    })
});

test('As the 5th argument', function($box) {
    $box.cssanimate({x:45},400,400,'snap',
        function() { $box.append('OK');
    })
});

group('Loopback');

test('Infinite loop', function($box) {
    $box.perspective(100).cssanimate([
        [{ x: 32 }],
        [{ y: 32 }],
        [{ z: -100 }]
    ], function(i) {
        $box.text(i);
    })
    ;
});

test('Stop after 1.2s', function($box) {
    $box.perspective(100).cssanimate([
        [{ x: 32 }],
        [{ y: 32 }],
        [{ z: -100 }]
    ]);
    setTimeout(function() {
        $box.stop(true, true);
    }, 1200);
});

test('Stop after 1step', function($box) {
    $box.perspective(100).cssanimate([
        [{ x: 32 }],
        [{ y: 32 }],
        [{ z: -100 }]
    ], function() {
        $box.stop(true, true);
    });
});

group('Prefix free');

test('Prefix free', function($box) {
    $box.cssanimate({
        transform: 'translateX(32px)'
    });
});

group('Better experience');

test('Data hold', function($box) {
    $box
        .cssanimate({ x: 32 })
        .cssanimate({ y: 32 })
});

test('Alternate of data hold', function($box) {
    $box.cssanimate({ x: 32 })
    $box.cssanimate({ y: 32 })
    ;
});

group('Alias');

test('$.fn.to', function($box) {
    $box.perspective(100)
        .to([32, 0])
        .to([0, 32, -100])
        .to([32])
});

test('$.fn.rotate', function($box) {
    $box.perspective(100)
        .cssanimate({scale:2})
        .rotate([100, 0]).rotate([400])
        .rotate([0, 200, -100])
});

test('$.fn.scale', function($box) {
    $box.scale([2])
        .scale([1, 2])
    
    ;
});

test('$.fn.skew', function($box) {
    $box.skew([45])
        .skew([0, 45])
        .skew([-45, -45])
    ;
});

test('$.fn.perspective', function($box) {
    $box.perspective(100)
        .to([0, 0, -100])
        .perspective(false)
    ;
});

test('$.fn.origin', function($box) {
    $box.origin('100%', '100%')
        .rotate([0, 0, 60])
        .origin('center', 'center')
        .rotate([0, 0, 60])
});

group('Relative value');

test('to with \'+=\'', function($box) {
    $box.perspective(100)
        .cssanimate({ to: ['+=32', '+=32', '+=32']})
});

test('to with \'-=\'', function($box) {
    $box.perspective(100)
        .cssanimate({ to: ['-=32', '-=32', '-=32']})
});

test('to with \'+=\'', function($box) {
    $box.perspective(100)
        .cssanimate({ to: { x: '+=32', y: '+=32', z: '+=32' }})
});

test('to with \'-=\'', function($box) {
    $box.perspective(100)
        .cssanimate({ to: { x: '-=32', y: '-=32', z: '-=32' }})
});

test('to with \'+=\'', function($box) {
    $box
        
        .cssanimate({ to: '+=32'})
});

test('to with \'-=\'', function($box) {
    $box
        
        .cssanimate({ to: '-=32'})
});

test('x with \'+=\'', function($box) {
    $box
        
        .cssanimate({ x: '+=32'})
});

test('x with \'-=\'', function($box) {
    $box
        
        .cssanimate({ x: '-=32'})
});

test('y with \'+=\'', function($box) {
    $box
        
        .cssanimate({ y: '+=32'})
});

test('y with \'-=\'', function($box) {
    $box
        
        .cssanimate({ y: '-=32'})
});

test('z with \'+=\'', function($box) {
    $box
        .perspective(100)
        .cssanimate({ z: '+=32'})
});

test('z with \'-=\'', function($box) {
    $box
        .perspective(100)
        .cssanimate({ z: '-=32'})
});

test('rotate with \'+=\'', function($box) {
    $box.perspective(100)
        .cssanimate({ rotate: ['+=32', '+=32', '+=32']})
});

test('rotate with \'-=\'', function($box) {
    $box.perspective(100)
        .cssanimate({ rotate: ['-=32', '-=32', '-=32']})
});

test('rotate with \'+=\'', function($box) {
    $box.perspective(100)
        .cssanimate({ rotate: { x: '+=32', y: '+=32', z: '+=32' }})
});

test('rotate with \'-=\'', function($box) {
    $box.perspective(100)
        .cssanimate({ rotate: { x: '-=32', y: '-=32', z: '-=32' }})
});

test('rotate with \'+=\'', function($box) {
    $box
        
        .cssanimate({ rotate: '+=32'})
});

test('rotate with \'-=\'', function($box) {
    $box
        
        .cssanimate({ rotate: '-=32'})
});

test('rotatex with \'+=\'', function($box) {
    $box
        .perspective(100)
        .cssanimate({ rotatex: '+=180'})
});

test('rotatex with \'-=\'', function($box) {
    $box
        .perspective(100)
        .cssanimate({ rotatex: '-=180'})
});

test('rotatey with \'+=\'', function($box) {
    $box
        .perspective(100)
        .cssanimate({ rotatey: '+=180'})
});

test('rotatey with \'-=\'', function($box) {
    $box
        .perspective(100)
        .cssanimate({ rotatey: '-=180'})
});

test('rotatez with \'+=\'', function($box) {
    $box
        .perspective(100)
        .cssanimate({ rotatez: '+=180'})
});

test('rotatez with \'-=\'', function($box) {
    $box
        .perspective(100)
        .cssanimate({ rotatez: '-=180'})
});

test('scalex with \'+=\'', function($box) {
    $box
        
        .cssanimate({ scalex: '+=1'})
});

test('scalex with \'-=\'', function($box) {
    $box
        
        .cssanimate({ scalex: '-=1'})
});

test('scaley with \'+=\'', function($box) {
    $box
        
        .cssanimate({ scaley: '+=1'})
});

test('scaley with \'-=\'', function($box) {
    $box
        
        .cssanimate({ scaley: '-=1'})
});

test('scale with \'+=\'', function($box) {
    $box.perspective(100)
        .cssanimate({ scale: ['+=1', '+=1', '+=1']})
});

test('scale with \'-=\'', function($box) {
    $box.perspective(100)
        .cssanimate({ scale: ['-=1', '-=1', '-=1']})
});

test('scale with \'+=\'', function($box) {
    $box.perspective(100)
        .cssanimate({ scale: { x: '+=1', y: '+=1', z: '+=1' }})
});

test('scale with \'-=\'', function($box) {
    $box.perspective(100)
        .cssanimate({ scale: { x: '-=1', y: '-=1', z: '-=1' }})
});

test('scale with \'+=\'', function($box) {
    $box
        
        .cssanimate({ scale: '+=1'})
});

test('scale with \'-=\'', function($box) {
    $box
        
        .cssanimate({ scale: '-=1'})
});

test('skewx with \'+=\'', function($box) {
    $box
        
        .cssanimate({ skewx: '+=60'})
});

test('skewx with \'-=\'', function($box) {
    $box
        
        .cssanimate({ skewx: '-=60'})
});

test('skewy with \'+=\'', function($box) {
    $box
        
        .cssanimate({ skewy: '+=60'})
});

test('skewy with \'-=\'', function($box) {
    $box
        
        .cssanimate({ skewy: '-=60'})
});

test('skew with \'+=\'', function($box) {
    $box
        .perspective(100)
        .cssanimate({ skew: ['+=32', '+=32']})
});

test('skew with \'-=\'', function($box) {
    $box
        .perspective(100)
        .cssanimate({ skew: ['-=32', '-=32']})
});

test('skew with \'+=\'', function($box) {
    $box.perspective(100)
        .cssanimate({ skew: { x: '+=32', y: '+=32' }})
});

test('skew with \'-=\'', function($box) {
    $box.perspective(100)
        .cssanimate({ skew: { x: '-=32', y: '-=32' }})
});

test('skew with \'+=\'', function($box) {
    $box
        
        .cssanimate({ skew: '+=32'})
});

test('skew with \'-=\'', function($box) {
    $box
        
        .cssanimate({ skew: '-=32'})
});

group('Event');

test('rotate with click', function($box) {
    var i = 0;
    $box.click(function() {
        $box.cssanimate({ rotatez: '+=90'}, 
        function() {
            $box.text(++i * 90)
        })
    })
});

group('Css hook');

test('to', function($box) {
    $box.css('to', [32, 32])
    $box.text($box.css('to').x + ',' + $box.css('to').y)
});

test('x', function($box) {
    $box.css('x', 32)
    $box.text($box.css('x'))
    ;
});

test('y', function($box) {
    $box.css('y', 32)
    $box.text($box.css('y'))
    ;
});

test('z', function($box) {
    $box.perspective(100).css('z', -32)
    $box.text($box.css('z'))
    ;
});

test('rotate', function($box) {
    $box.css('rotate', [45])
    $box.text($box.css('rotate').x + ',' + $box.css('rotate').y)
});

test('rotatex', function($box) {
    $box.css('rotatex', 45)
    $box.text($box.css('rotatex'))
    ;
});

test('rotatey', function($box) {
    $box.css('rotatey', 45)
    $box.text($box.css('rotatey'))
    ;
});

test('rotatez', function($box) {
    $box.perspective(100).css('rotatez', -45)
    $box.text($box.css('rotatez'))
    ;
});

test('scale', function($box) {
    $box.css('scale', [2, 2])
    $box.text($box.css('scale').x + ',' + $box.css('scale').y)
});

test('scalex', function($box) {
    $box.css('scalex', 2)
    $box.text($box.css('scalex'))
    ;
});

test('scaley', function($box) {
    $box.css('scaley', 2)
    $box.text($box.css('scaley'))
    ;
});

test('skew', function($box) {
    $box.css('skew', [32, 32])
    $box.text($box.css('skew').x + ',' + $box.css('skew').y)
});

test('skewx', function($box) {
    $box.css('skewx', 32)
    $box.text($box.css('skewx'))
    ;
});

test('skewy', function($box) {
    $box.css('skewy', 32)
    $box.text($box.css('skewy'))
    ;
});

$('.play-translate').click(function() { $('.group-translate').trigger('play'); });
$('.play-rotate').click(function() { $('.group-rotate').trigger('play'); });
$('.play-scale').click(function() { $('.group-scale').trigger('play'); });
$('.play-skew').click(function() { $('.group-skew').trigger('play'); });
$('.play-callback').click(function() { $('.group-callback').trigger('play'); });
$('.play-duration').click(function() { $('.group-duration').trigger('play'); });
$('.play-delay').click(function() { $('.group-delay').trigger('play'); });
$('.play-ease').click(function() { $('.group-ease').trigger('play'); });
$('.play-loopback').click(function() { $('.group-loopback').trigger('play'); });
$('.play-prefix').click(function() { $('.group-prefix').trigger('play'); });
$('.play-better').click(function() { $('.group-better').trigger('play'); });
$('.play-alias').click(function() { $('.group-alias').trigger('play'); });
$('.play-relative').click(function() { $('.group-relative').trigger('play'); });
$('.play-event').click(function() { $('.group-event').trigger('play'); });
$('.play-css').click(function() { $('.group-css').trigger('play'); });

</script>
</body>
</html>